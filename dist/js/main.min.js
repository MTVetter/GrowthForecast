/*
 projections | 1.0.0 | 2019-08-02 
*/

"use strict";require(["esri/Map","esri/views/MapView","esri/widgets/BasemapToggle","esri/widgets/Zoom","esri/widgets/Home","esri/widgets/Search","esri/layers/FeatureLayer","esri/tasks/Locator","esri/geometry/Extent","esri/renderers/smartMapping/creators/color","esri/widgets/Legend"],function(e,o,a,s,l,r,i,t,n,d,c){var u=new e({basemap:"streets-navigation-vector"}),p=new o({container:"viewDiv",map:u,center:[-95.444,29.756],zoom:8});p.ui.remove("zoom");var m=new a({view:p,nextBasemap:"satellite"});p.ui.add(m,"bottom-right");var g=new s({view:p});p.ui.add(g,"bottom-right");var b=new l({view:p});p.ui.add(b,"bottom-right");var v=new r({view:p,includeDefaultSources:!1,sources:[{locator:new t({url:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer"}),singleLineFieldName:"SingleLine",outFields:["Addr_type"],searchExtent:new n({xmax:-97.2928,ymax:30.7976,xmin:-93.2361,ymin:28.4605}),placeholder:"3555 Timmons Ln, Houston, TX"}]});p.ui.add(v,"bottom-right");var f=new c({view:p});p.ui.add(f,"top-right");var h=new i({url:"https://gis.h-gac.com/arcgis/rest/services/Forecast/Census_Tracts/MapServer/0",popupTemplate:{title:"{Tract} in {County}",content:[{type:"fields",fieldInfos:[{fieldName:"Household_Population_2018",label:"Household Population (2018)",format:{digitSeparator:!0,places:0}},{fieldName:"Household_Population_2045",label:"Household Populations (2045)",format:{digitSeparator:!0,places:0}},{fieldName:"Households_2018",label:"Households (2018)",format:{digitSeparator:!0,places:0}},{fieldName:"Households_2045",label:"Households (2045)",format:{digitSeparator:!0,places:0}},{fieldName:"Jobs_2018",label:"Jobs (2018)",format:{digitSeparator:!0,places:0}},{fieldName:"Jobs_2045",label:"Jobs (2045)",format:{digitSeparator:!0,places:0}}]}]}});u.add(h);var w=new i({url:"https://gis.h-gac.com/arcgis/rest/services/Forecast/TAZ_5217/MapServer/0",visible:!1,popupTemplate:{title:"{Taz} in {County}",content:[{type:"fields",fieldInfos:[{fieldName:"Household_Population_2018",label:"Household Population (2018)",format:{digitSeparator:!0,places:0}},{fieldName:"Household_Population_2045",label:"Household Populations (2045)",format:{digitSeparator:!0,places:0}},{fieldName:"Households_2018",label:"Households (2018)",format:{digitSeparator:!0,places:0}},{fieldName:"Households_2045",label:"Households (2045)",format:{digitSeparator:!0,places:0}},{fieldName:"Jobs_2018",label:"Jobs (2018)",format:{digitSeparator:!0,places:0}},{fieldName:"Jobs_2045",label:"Jobs (2045)",format:{digitSeparator:!0,places:0}}]}]}});u.add(w);var C=new i({url:"https://gis.h-gac.com/arcgis/rest/services/Forecast/H3M/MapServer/0",visible:!1,popupTemplate:{title:"{H3M}",content:[{type:"fields",fieldInfos:[{fieldName:"Household_Population_2018",label:"Household Population (2018)",format:{digitSeparator:!0,places:0}},{fieldName:"Household_Population_2045",label:"Household Populations (2045)",format:{digitSeparator:!0,places:0}},{fieldName:"Households_2018",label:"Households (2018)",format:{digitSeparator:!0,places:0}},{fieldName:"Households_2045",label:"Households (2045)",format:{digitSeparator:!0,places:0}},{fieldName:"Jobs_2018",label:"Jobs (2018)",format:{digitSeparator:!0,places:0}},{fieldName:"Jobs_2045",label:"Jobs (2045)",format:{digitSeparator:!0,places:0}}]}]},title:"3 Square Mile Grid"});u.add(C);var S=$("#fldDropdown").val(),_=$("#yrDropdown").val();function H(e,o){var a={layer:h,field:e+"_"+o,basemap:u.basemap,classificationMethod:"quantile",colorScheme:{name:"div-blue-red",tags:"Custom color scheme",id:"above-and-below/streets-navigation-vector/div-blue-red",colors:[[254,229,217],[252,174,145],[251,106,74],[222,45,38],[165,15,21]],noDataColor:[0,0,0],colorsForClassBreaks:[{colors:[[254,229,217,.7]],numClasses:1},{colors:[[254,229,217,.7],[252,174,145,.7]],numClasses:2},{colors:[[254,229,217,.7],[252,174,145,.7],[251,106,74,.7]],numClasses:3},{colors:[[254,229,217,.7],[252,174,145,.7],[251,106,74,.7],[222,45,38,.7]],numClasses:4},{colors:[[254,229,217,.7],[252,174,145,.7],[251,106,74,.7],[222,45,38,.7],[165,15,21,.7]],numClasses:5}],outline:{color:{r:0,g:0,b:0,a:.25},width:"1px"}},legendOptions:{title:o+" - "+e}};d.createClassBreaksRenderer(a).then(function(e){h.renderer=e.renderer,h.visible||(w.visible=!1,h.visible=!0,C.visible=!1)})}function y(e,o){var a={layer:w,field:e+"_"+o,basemap:u.basemap,classificationMethod:"quantile",colorScheme:{name:"div-blue-red",tags:"Custom color scheme",id:"above-and-below/streets-navigation-vector/div-blue-red",colors:[[254,229,217],[252,174,145],[251,106,74],[222,45,38],[165,15,21]],noDataColor:[0,0,0],colorsForClassBreaks:[{colors:[[254,229,217,.7]],numClasses:1},{colors:[[254,229,217,.7],[252,174,145,.7]],numClasses:2},{colors:[[254,229,217,.7],[252,174,145,.7],[251,106,74,.7]],numClasses:3},{colors:[[254,229,217,.7],[252,174,145,.7],[251,106,74,.7],[222,45,38,.7]],numClasses:4},{colors:[[254,229,217,.7],[252,174,145,.7],[251,106,74,.7],[222,45,38,.7],[165,15,21,.7]],numClasses:5}],outline:{color:{r:0,g:0,b:0,a:.25},width:"1px"}},legendOptions:{title:o+" - "+e}};d.createClassBreaksRenderer(a).then(function(e){w.renderer=e.renderer,w.visible||(w.visible=!0,h.visible=!1,C.visible=!1)})}function N(e,o){var a={layer:C,field:e+"_"+o,basemap:u.basemap,classificationMethod:"natural-breaks",colorScheme:{name:"div-blue-red",tags:"Custom color scheme",id:"above-and-below/streets-navigation-vector/div-blue-red",colors:[[26,152,80],[145,207,96],[217,239,139],[255,255,191],[254,224,139],[252,141,89],[215,48,39]],noDataColor:[0,0,0],colorsForClassBreaks:[{colors:[[26,152,80,.7]],numClasses:1},{colors:[[26,152,80,.7],[145,207,96,.7]],numClasses:2},{colors:[[26,152,80,.7],[145,207,96,.7],[217,239,139,.7]],numClasses:3},{colors:[[26,152,80,.7],[145,207,96,.7],[217,239,139,.7],[255,255,191,.7]],numClasses:4},{colors:[[145,207,96,.7],[217,239,139,.6],[255,255,191,.7],[254,224,139,.6],[252,141,89,.6]],numClasses:5},{colors:[[26,152,80,.6],[145,207,96,.6],[255,255,191,.6],[254,224,139,.6],[252,141,89,.6],[215,48,39,.6]],numClasses:6},{colors:[[26,152,80,.6],[145,207,96,.6],[217,239,139,.6],[255,255,191,.6],[254,224,139,.6],[252,141,89,.6],[215,48,39,.6]],numClasses:7}],outline:{color:{r:0,g:0,b:0,a:.25},width:"1px"}},numClasses:7,legendOptions:{title:o+" - "+e}};d.createClassBreaksRenderer(a).then(function(e){C.renderer=e.renderer,C.visible||(w.visible=!1,h.visible=!1,C.visible=!0)})}$("#fldDropdown").change(function(){S=$("#fldDropdown").val(),"tracts"==$("input:checked").val()?(console.log("tracts"),H(S,_)):"taz"==$("input:checked").val()?(console.log("taz"),y(S,_)):"grid"==$("input:checked").val()&&(console.log("grid"),N(S,_))}),$("#yrDropdown").change(function(){_=$("#yrDropdown").val(),"tracts"==$("input:checked").val()?(console.log("tracts year"),H(S,_)):"taz"==$("input:checked").val()?(console.log("taz yr"),y(S,_)):"grid"==$("input:checked").val()&&(console.log("grid yr"),N(S,_))}),H(S,_),$("#tractsStyle").click(function(){H(S,_)}),$("#tazStyle").click(function(){y(S,_)}),$("#gridStyle").click(function(){N(S,_)})});